{
    "family":  "medweg-task",
    "networkMode":  "awsvpc",
    "requiresCompatibilities":  [
                                    "FARGATE"
                                ],
    "cpu":  "1024",
    "memory":  "2048",
    "executionRoleArn":  "arn:aws:iam::096929701465:role/ecsTaskExecutionRole",
    "taskRoleArn":  "arn:aws:iam::096929701465:role/ecsTaskRole",
    "containerDefinitions":  [
                                 {
                                     "name":  "medweg-backend",
                                     "image":  "096929701465.dkr.ecr.eu-central-1.amazonaws.com/medweg-backend:latest",
                                     "cpu":  512,
                                     "memory":  1024,
                                     "essential":  true,
                                     "portMappings":  [
                                                          {
                                                              "containerPort":  5000,
                                                              "protocol":  "tcp"
                                                          }
                                                      ],
                                     "environment":  [
                                                         {
                                                             "name":  "NODE_ENV",
                                                             "value":  "production"
                                                         },
                                                         {
                                                             "name":  "PORT",
                                                             "value":  "5000"
                                                         },
                                                         {
                                                             "name":  "API_VERSION",
                                                             "value":  "v1"
                                                         },
                                                         {
                                                             "name":  "DB_PORT",
                                                             "value":  "5432"
                                                         },
                                                         {
                                                             "name":  "AWS_REGION",
                                                             "value":  "eu-central-1"
                                                         },
                                                         {
                                                             "name":  "S3_BUCKET_NAME",
                                                             "value":  "medweg-invoices-096929701465"
                                                         },
                                                         {
                                                             "name":  "SES_SENDER_EMAIL",
                                                             "value":  "noreply@medweg.de"
                                                         },
                                                         {
                                                             "name":  "FRONTEND_URL",
                                                             "value":  "http://medweg-alb-1668104968.eu-central-1.elb.amazonaws.com"
                                                         },
                                                         {
                                                             "name":  "BACKEND_URL",
                                                             "value":  "http://medweg-alb-1668104968.eu-central-1.elb.amazonaws.com"
                                                         },
                                                         {
                                                             "name":  "VAPID_SUBJECT",
                                                             "value":  "mailto:admin@medweg.de"
                                                         },
                                                         {
                                                             "name":  "EMAIL_HOST",
                                                             "value":  "smtp.gmail.com"
                                                         },
                                                         {
                                                             "name":  "EMAIL_PORT",
                                                             "value":  "587"
                                                         },
                                                         {
                                                             "name":  "EMAIL_SECURE",
                                                             "value":  "false"
                                                         },
                                                         {
                                                             "name":  "EMAIL_FROM_NAME",
                                                             "value":  "MEDWEG Bavaria"
                                                         },
                                                         {
                                                             "name":  "EMAIL_FROM_ADDRESS",
                                                             "value":  "nikolabogdanic7@gmail.com"
                                                         },
                                                         {
                                                             "name":  "JWT_EXPIRY",
                                                             "value":  "15m"
                                                         },
                                                         {
                                                             "name":  "JWT_REFRESH_EXPIRY",
                                                             "value":  "7d"
                                                         },
                                                         {
                                                             "name":  "DB_SSL",
                                                             "value":  "true"
                                                         },
                                                         {
                                                             "name":  "LOG_LEVEL",
                                                             "value":  "info"
                                                         },
                                                         {
                                                             "name":  "CRON_ENABLED",
                                                             "value":  "true"
                                                         }
                                                     ],
                                     "secrets":  [
                                                     {
                                                         "name":  "DB_HOST",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/db-host-9U1S5G"
                                                     },
                                                     {
                                                         "name":  "DB_NAME",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/db-name-TCPbYe"
                                                     },
                                                     {
                                                         "name":  "DB_USER",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/db-user-P3fLcs"
                                                     },
                                                     {
                                                         "name":  "DB_PASSWORD",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/db-password-tjCLAs"
                                                     },
                                                     {
                                                         "name":  "DB_ENCRYPTION_KEY",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/db-encryption-key-utj6i5"
                                                     },
                                                     {
                                                         "name":  "JWT_SECRET",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/jwt-secret-FNBa21"
                                                     },
                                                     {
                                                         "name":  "JWT_REFRESH_SECRET",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/jwt-refresh-secret-500VnN"
                                                     },
                                                     {
                                                         "name":  "AWS_ACCESS_KEY_ID",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/aws-access-key-id-dheIgH"
                                                     },
                                                     {
                                                         "name":  "AWS_SECRET_ACCESS_KEY",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/aws-secret-key"
                                                     },
                                                     {
                                                         "name":  "VAPID_PUBLIC_KEY",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/vapid-public-key-QozYka"
                                                     },
                                                     {
                                                         "name":  "VAPID_PRIVATE_KEY",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/vapid-private-key-VVcEsI"
                                                     },
                                                     {
                                                         "name":  "EMAIL_USER",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/email-user-JOiSCo"
                                                     },
                                                     {
                                                         "name":  "EMAIL_PASSWORD",
                                                         "valueFrom":  "arn:aws:secretsmanager:eu-central-1:096929701465:secret:medweg/email-password-gmVTAc"
                                                     }
                                                 ],
                                     "logConfiguration":  {
                                                              "logDriver":  "awslogs",
                                                              "options":  {
                                                                              "awslogs-group":  "/ecs/medweg-backend",
                                                                              "awslogs-region":  "eu-central-1",
                                                                              "awslogs-stream-prefix":  "ecs"
                                                                          }
                                                          },
                                     "healthCheck":  {
                                                         "command":  [
                                                                         "CMD-SHELL",
                                                                         "wget --no-verbose --tries=1 --spider http://localhost:5000/health || exit 1"
                                                                     ],
                                                         "interval":  30,
                                                         "timeout":  5,
                                                         "retries":  3,
                                                         "startPeriod":  60
                                                     }
                                 },
                                 {
                                     "name":  "medweg-frontend",
                                     "image":  "096929701465.dkr.ecr.eu-central-1.amazonaws.com/medweg-frontend:latest",
                                     "cpu":  512,
                                     "memory":  1024,
                                     "essential":  true,
                                     "portMappings":  [
                                                          {
                                                              "containerPort":  80,
                                                              "protocol":  "tcp"
                                                          }
                                                      ],
                                     "dependsOn":  [
                                                       {
                                                           "containerName":  "medweg-backend",
                                                           "condition":  "HEALTHY"
                                                       }
                                                   ],
                                     "logConfiguration":  {
                                                              "logDriver":  "awslogs",
                                                              "options":  {
                                                                              "awslogs-group":  "/ecs/medweg-frontend",
                                                                              "awslogs-region":  "eu-central-1",
                                                                              "awslogs-stream-prefix":  "ecs"
                                                                          }
                                                          },
                                     "healthCheck":  {
                                                         "command":  [
                                                                         "CMD-SHELL",
                                                                         "wget --no-verbose --tries=1 --spider http://localhost/health || exit 1"
                                                                     ],
                                                         "interval":  30,
                                                         "timeout":  5,
                                                         "retries":  3,
                                                         "startPeriod":  30
                                                     }
                                 }
                             ]
}
